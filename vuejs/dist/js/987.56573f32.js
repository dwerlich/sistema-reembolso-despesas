"use strict";(self["webpackChunkinnovare"]=self["webpackChunkinnovare"]||[]).push([[987],{9987:function(e,t,l){l.r(t),l.d(t,{default:function(){return _e}});var a=l(6252),o=l(6612),n=l(8061);const s={class:"col-md-2 my-1"},i={type:"text",class:"form-control",id:"startFilter",placeholder:"Dê dd/mm/AAAA"},d={class:"col-md-2 my-1"},r={type:"text",class:"form-control",id:"endFilter",placeholder:"Até dd/mm/AAAA"},u={key:0,class:"col-md-3 my-1"},c={class:"form-control form-select",id:"userFilter",name:"user"},m=(0,a._)("option",{value:""},"Todos usuários",-1),g=["value"],p={class:"row"},v={class:"col mt-5"},w=(0,a._)("th",null,"Requerente",-1),f=(0,a._)("th",{class:"text-center"},"Valor Total",-1),y=(0,a._)("th",{class:"text-center"},"Data",-1),_=(0,a._)("th",{class:"text-center"},"Status",-1),h=(0,a._)("th",{class:"text-center"},"Ações",-1),x={key:0},b=["id"],k={class:"text-center"},D={class:"text-center"},C={class:"text-center"},E={class:"text-center"},S=["onClick"],T=["onClick"],B=["onClick"],M=["onClick"],W=["onClick"],Z=["id"],A=(0,a._)("span",{class:"visually-hidden"},null,-1),I=[A],H={key:1},N=(0,a._)("tr",null,[(0,a._)("td",{colspan:"5",class:"text-center"},"Nenhum resultado encontrado")],-1),q=[N],z={action:"javascript:void(0);",id:"form",novalidate:""},P=(0,a._)("input",{type:"hidden",id:"id",name:"id",value:"0"},null,-1),V=["id","value"],R=(0,a._)("label",{for:"category",class:"form-label"},[(0,a.Uk)("Categoria "),(0,a._)("span",{class:"text-danger"},"*")],-1),j=["onUpdate:modelValue"],L=(0,a._)("option",{value:""},"Selecione",-1),U=["value"],F={for:"category",class:"form-label w-100"},K={class:"text-danger"},Y=(0,a._)("span",null,"*",-1),O=["onClick"],$=["id","value","onKeyup"],G=(0,a._)("label",{for:"category",class:"form-label"},[(0,a.Uk)("Valor Total "),(0,a._)("span",{class:"text-danger"},"*")],-1),J=(0,a._)("input",{id:"valueTotal",name:"valueTotal",class:"form-control",type:"text",placeholder:"R$ 0,00",required:"",readonly:""},null,-1),Q={id:"sectionModal"},X=(0,a._)("b",null,"Requerente: ",-1),ee=(0,a._)("span",{id:"userNameDetail"},null,-1),te=(0,a._)("b",null,"Categoria: ",-1),le=(0,a._)("b",null,"Valor: ",-1),ae=(0,a._)("b",null,"Valor Total: ",-1),oe=(0,a._)("span",{id:"valueTotalDetail"},null,-1);function ne(e,t,l,A,N,ne){const se=(0,a.up)("PageHeader"),ie=(0,a.up)("b-badge"),de=(0,a.up)("Pagination"),re=(0,a.up)("b-col"),ue=(0,a.up)("b-row"),ce=(0,a.up)("TableLists"),me=(0,a.up)("Layout"),ge=(0,a.up)("b-button"),pe=(0,a.up)("b-modal"),ve=(0,a.Q2)("maska");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a.Wm)(me,null,{default:(0,a.w5)((()=>[(0,a.Wm)(se,{title:A.title},null,8,["title"]),(0,a.Wm)(ce,{session:"Pending",title:"Solicitação",ref:"childComponentRef",col:"2",filter:!0,onResetModal:A.resetModal},{"form-filter":(0,a.w5)((()=>[(0,a._)("div",s,[(0,a.wy)((0,a._)("input",i,null,512),[[ve,"##/##/####"]])]),(0,a._)("div",d,[(0,a.wy)((0,a._)("input",r,null,512),[[ve,"##/##/####"]])]),1==A.user.category?((0,a.wg)(),(0,a.iD)("div",u,[(0,a._)("select",c,[m,((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(A.users,(e=>((0,a.wg)(),(0,a.iD)("option",{key:e.id,value:e.id},(0,o.zw)(e.name),9,g)))),128))])])):(0,a.kq)("",!0)])),total:(0,a.w5)((()=>[(0,a._)("div",p,[(0,a._)("div",v,[(0,a._)("p",null,"Exibindo de "+(0,o.zw)(this.pendings.start)+" a "+(0,o.zw)(this.pendings.partial)+" de "+(0,o.zw)(this.pendings.total)+" registros",1)])])])),"t-head":(0,a.w5)((()=>[w,f,y,_,h])),"t-body":(0,a.w5)((()=>[this.pendings.message.length>0?((0,a.wg)(),(0,a.iD)("tbody",x,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(this.pendings.message,(e=>((0,a.wg)(),(0,a.iD)("tr",{key:e.id,id:"line"+e.id},[(0,a._)("td",null,(0,o.zw)(e.user_name),1),(0,a._)("td",k,(0,o.zw)(e.value.toLocaleString("pt-BR",{style:"currency",currency:"BRL"})),1),(0,a._)("td",D,(0,o.zw)(e.date),1),(0,a._)("td",C,[(0,a.Wm)(ie,{class:"fs-12 text-white",variant:"warning"},{default:(0,a.w5)((()=>[(0,a.Uk)(" Pendente ")])),_:1})]),(0,a._)("td",E,[A.user.id==e.user_id?((0,a.wg)(),(0,a.iD)("i",{key:0,class:"bx bx-pencil text-info fs-14 mx-1 pointer",onClick:t=>A.getView(e.id),title:"Editar"},null,8,S)):(0,a.kq)("",!0),A.user.id==e.user_id?((0,a.wg)(),(0,a.iD)("i",{key:1,class:"bx bx-trash text-danger fs-14 mx-1 pointer",title:"Excluir",onClick:t=>A.deleteLine(e.id)},null,8,T)):(0,a.kq)("",!0),1==A.user.category&&A.user.id!=e.user_id?((0,a.wg)(),(0,a.iD)("i",{key:2,class:"bx bx-search text-info fs-14 mx-1 pointer",title:"Detalhes",onClick:t=>A.detailsSolicitation(e.id)},null,8,B)):(0,a.kq)("",!0),1==A.user.category?((0,a.wg)(),(0,a.iD)("i",{key:3,class:"bx bx-check-circle text-success fs-14 mx-1 pointer",title:"Confirmar",onClick:t=>A.newStatusSolicitation(e.id,"confirmar")},null,8,M)):(0,a.kq)("",!0),1==A.user.category?((0,a.wg)(),(0,a.iD)("i",{key:4,class:"bx bx-x-circle text-danger fs-14 mx-1 pointer",title:"Cancelar",onClick:t=>A.newStatusSolicitation(e.id,"cancelar")},null,8,W)):(0,a.kq)("",!0)]),(0,a._)("span",{class:"spinner spinner-border spinner-line flex-shrink-0",id:"spinnerLine"+e.id,role:"status"},I,8,Z)],8,b)))),128))])):0===this.pendings.total?((0,a.wg)(),(0,a.iD)("tbody",H,q)):(0,a.kq)("",!0)])),pagination:(0,a.w5)((()=>[(0,a.Wm)(de,{total:A.pendings.total,index:this.data.paramns.index,limit:this.data.paramns.limit,session:"Pending"},null,8,["total","index","limit"])])),"form-modal":(0,a.w5)((()=>[(0,a._)("form",z,[P,((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(A.objs,((e,t)=>((0,a.wg)(),(0,a.j4)(ue,{class:"mb-3",key:"row"+t},{default:(0,a.w5)((()=>[(0,a._)("input",{type:"hidden",id:"id"+t,name:"idDetail[]",value:e.id},null,8,V),(0,a.Wm)(re,{md:"6"},{default:(0,a.w5)((()=>[R,(0,a.wy)((0,a._)("select",{class:"form-control form-select category",id:"category",name:"category[]","onUpdate:modelValue":t=>e.category=t,required:""},[L,((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(A.options,(e=>((0,a.wg)(),(0,a.iD)("option",{key:e.id,value:e.id},(0,o.zw)(e.name),9,U)))),128))],8,j),[[n.bM,e.category]])])),_:2},1024),(0,a.Wm)(re,{md:"6"},{default:(0,a.w5)((()=>[(0,a._)("label",F,[(0,a.Uk)("Valor "),(0,a._)("span",K,[Y,(0,a._)("i",{class:"bx bx-trash fs-14 pointer text-end",style:{float:"right"},title:"Excluir",onClick:l=>A.deleteSolicitation(t,e.id)},null,8,O)])]),(0,a._)("input",{id:"value"+t,name:"value[]",class:"form-control value",value:e.value,type:"text",placeholder:"R$ 0,00",required:"",onKeyup:e=>A.getTotal("value"+t)},null,40,$)])),_:2},1024)])),_:2},1024)))),128)),(0,a.Wm)(ue,null,{default:(0,a.w5)((()=>[(0,a.Wm)(re,{md:"7"}),(0,a.Wm)(re,{md:"5"},{default:(0,a.w5)((()=>[G,J])),_:1})])),_:1}),(0,a.Wm)(ue,null,{default:(0,a.w5)((()=>[(0,a.Wm)(re,{xl:"12",class:"text-center mt-4 fs-24"},{default:(0,a.w5)((()=>[(0,a._)("i",{class:"bx bx-plus-circle pointer",onClick:t[0]||(t[0]=e=>A.addObjs())})])),_:1})])),_:1})])])),_:1},8,["onResetModal"])])),_:1}),(0,a.Wm)(pe,{modelValue:A.showDetails,"onUpdate:modelValue":t[2]||(t[2]=e=>A.showDetails=e),centered:"",title:"Detalhes da Solicitação",class:"v-modal-custom",scrollable:"",onHidden:A.resetModal},{footer:(0,a.w5)((()=>[(0,a.Wm)(ge,{type:"button",id:"closeModalDetail",variant:"danger",onClick:t[1]||(t[1]=e=>A.showDetails=!1)},{default:(0,a.w5)((()=>[(0,a.Uk)("Fechar ")])),_:1})])),default:(0,a.w5)((()=>[(0,a._)("section",Q,[(0,a.Wm)(ue,null,{default:(0,a.w5)((()=>[(0,a.Wm)(re,{xl:"12",class:"mb-3"},{default:(0,a.w5)((()=>[X,ee])),_:1})])),_:1}),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(A.objs,((e,t)=>((0,a.wg)(),(0,a.j4)(ue,{key:"rowModal"+t},{default:(0,a.w5)((()=>[(0,a.Wm)(re,{md:"6",class:"mb-3"},{default:(0,a.w5)((()=>[te,(0,a.Uk)(" "+(0,o.zw)(e.category_name),1)])),_:2},1024),(0,a.Wm)(re,{md:"6",class:"mb-3"},{default:(0,a.w5)((()=>[le,(0,a.Uk)(" "+(0,o.zw)(e.value),1)])),_:2},1024)])),_:2},1024)))),128)),(0,a.Wm)(ue,null,{default:(0,a.w5)((()=>[(0,a.Wm)(re,{xl:"12",class:"mb-3"},{default:(0,a.w5)((()=>[ae,oe])),_:1})])),_:1})])])),_:1},8,["modelValue","onHidden"])],64)}l(7658);var se=l(2931),ie=l(6441),de=l(9361),re=l(3340),ue=l(2980),ce=l(4080),me=l(2965),ge=l(9946),pe=l(9028),ve=l(9035),we={page:{title:"Solicitações Pendentes"},components:{BCol:re.lP,BRow:re.Tp,Layout:ie.Z,PageHeader:de.Z,TableLists:ue.Z,Pagination:ce.Z},setup(){const e=JSON.parse(localStorage.getItem("user"));ve.Z.dispatch("pendingModule/"+me.Zk),ve.Z.dispatch("categoriesModule/"+me.IG),1===e.category&&ve.Z.dispatch("usersModule/"+me.wQ);const t=(0,se.iH)([{id:0,value:"",category:""}]),l=(0,se.iH)(!1),o=()=>{document.getElementById("form").classList.remove("was-validated"),document.getElementById("form").reset(),document.getElementById("id").value=0,t.value=[{id:0,value:"",category:""}]},n=(0,se.iH)(null),s=async e=>{n.value.modalShow(),(0,ge.Av)("form","save"),await pe.Z.get("solicitacao/dados/"+e,{headers:{Authorization:` Bearer ${localStorage.getItem("jwt")} `}}).then((e=>{const l=e.data.message;t.value=[],l.details.forEach((e=>t.value.push(e))),document.getElementById("valueTotal").value=l.valueTotal,document.getElementById("id").value=l.id,(0,ge.E9)("form","save")})).catch((e=>{(0,ge.E9)("form","save"),console.error(e),(0,ge.cB)(e.response.data.message),(0,ge.rN)(e)}))},i=async e=>{const t=await(0,ge.fP)();t.value&&ve.Z.dispatch("pendingModule/"+me.Al,e)},d=()=>{t.value=[];const e=document.getElementsByClassName("value"),l=document.getElementsByClassName("category");for(let a=0;a<e.length;a++){const o={id:0,value:e[a].value,category:l[a].value};t.value.push(o)}},r=()=>{d();const e={id:0,value:"",category:""};t.value.push(e)},u=e=>{e&&(0,ge.lb)(e);let t=0;const l=document.getElementsByClassName("value");for(let a=0;a<l.length;a++){const e=(0,ge.G8)(l[a].value);e&&(t+=e)}document.getElementById("valueTotal").value=t.toFixed(2),console.log(100*t),(0,ge.lb)("valueTotal")},c=async(e,l)=>{let a=!1;if(l>0&&(a=await ve.Z.dispatch("pendingModule/"+me.NA,l)),console.log(a),!0===a){d();const l=document.getElementById("row"+e);l&&l.parentNode.removeChild(l),t.value=t.value.filter(((t,l)=>e!==l));let a=0;t.value.forEach((e=>{const t=(0,ge.G8)(e.value);t&&(a+=t)})),document.getElementById("valueTotal").value=a.toFixed(2),(0,ge.lb)("valueTotal")}},m=(e,t)=>{ve.Z.dispatch("pendingModule/"+me.N3,{id:e,type:t})},g=async e=>{l.value=!0,(0,ge.Av)("sectionModal","save"),await pe.Z.get("solicitacao/dados/"+e,{headers:{Authorization:` Bearer ${localStorage.getItem("jwt")} `}}).then((e=>{const l=e.data.message;t.value=[],l.details.forEach((e=>t.value.push(e))),document.getElementById("valueTotalDetail").innerText=l.valueTotal,document.getElementById("userNameDetail").innerText=l.user_name,(0,ge.E9)("sectionModal","save")})).catch((e=>{(0,ge.E9)("form","save"),console.error(e),(0,ge.cB)(e.response.data.message),(0,ge.rN)(e)}))};return{title:"Solicitações Pendentes",items:null,data:JSON.parse(localStorage.getItem("Pending")),pendings:(0,a.Fl)((()=>ve.Z.state.pendingModule.pending)),options:(0,a.Fl)((()=>ve.Z.state.categoriesModule.options)),users:(0,a.Fl)((()=>ve.Z.state.usersModule.users_options)),resetModal:o,getView:s,childComponentRef:n,deleteLine:i,objs:t,addObjs:r,getTotal:u,deleteSolicitation:c,user:e,newStatusSolicitation:m,detailsSolicitation:g,showDetails:l}}},fe=l(3744);const ye=(0,fe.Z)(we,[["render",ne]]);var _e=ye}}]);
//# sourceMappingURL=987.56573f32.js.map